# Plan 25-02: CSV Updates

---
wave: 1
depends_on: []
files_modified:
  - src/lib/utils/csv.ts
  - src/lib/utils/csv-import.ts
autonomous: true
---

## Objective

Fix CSV import to support all 6 categories, add cutItem column to import/export.

## Requirements

- VAL-04: Update CSV import/export for new categories and cutItem field

## Tasks

<task id="1">
Update src/lib/utils/csv.ts generateBOMCSV():
- Add CutItem column to headers (after Notes)
- Output Yes/No for cutItem value (derive from category if undefined)
- Rename Height to Thickness in header
- Use thickness field with height fallback
</task>

<task id="2">
BUG FIX: Update src/lib/utils/csv-import.ts line 120:
- Current: ['lumber', 'hardware', 'finishes', 'consumables']
- Fixed: ['hardwood', 'common', 'sheet', 'hardware', 'finishes', 'consumables']
</task>

<task id="3">
Update src/lib/utils/csv-import.ts validateRow():
- Support both Height and Thickness columns for backward compatibility
- Add CutItem validation (accept Yes/No/True/False if provided)
</task>

<task id="4">
Update src/lib/utils/csv-import.ts rowToBOMItem():
- Add import for isLumberCategory from $lib/types/bom
- Parse Thickness column (fallback to Height)
- Parse CutItem column (default based on category if not provided)
- Set cutItem in returned BOMItem
</task>

## Verification

<must_have>
- Build passes (npm run build)
- CSV export includes CutItem column
- CSV export uses Thickness header (not Height)
- CSV import accepts all 6 categories (hardwood, common, sheet, hardware, finishes, consumables)
- CSV import accepts both Height and Thickness columns
- CSV import parses CutItem correctly
- Round-trip: export then import preserves all data
</must_have>
