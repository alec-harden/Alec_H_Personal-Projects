---
phase: 23-schema-foundation
plan: 02
type: execute
wave: 2
depends_on: ["23-01"]
files_modified:
  - src/lib/utils/board-feet.ts
autonomous: true

must_haves:
  truths:
    - "calculateBoardFeet function no longer exists"
    - "formatBoardFeet function no longer exists"
    - "parseFractionalInches function still works"
    - "formatDimension function still works"
  artifacts:
    - path: "src/lib/utils/board-feet.ts"
      provides: "Dimension parsing and formatting utilities"
      exports: ["parseFractionalInches", "formatDimension"]
      not_exports: ["calculateBoardFeet", "formatBoardFeet"]
  key_links:
    - from: "src/lib/components/bom/BOMItem.svelte"
      to: "src/lib/utils/board-feet.ts"
      via: "import formatDimension"
      pattern: "formatDimension"
---

<objective>
Remove board feet calculation functions that are no longer needed in v4.0.

Purpose: The v4.0 milestone removes board feet calculations in favor of piece counts. The calculateBoardFeet and formatBoardFeet functions are no longer used and should be removed. The parseFractionalInches and formatDimension functions are still needed for dimension input/display.

Output: Slimmed-down board-feet.ts with only dimension utilities.
</objective>

<execution_context>
@C:\Users\wn45mv\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\wn45mv\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/23-schema-foundation/23-01-SUMMARY.md

# Source file being modified
@src/lib/utils/board-feet.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove board feet functions</name>
  <files>src/lib/utils/board-feet.ts</files>
  <action>
Remove the following from board-feet.ts:

1. DELETE the `calculateBoardFeet` function (lines ~73-84)
2. DELETE the `formatBoardFeet` function (lines ~92-102)
3. UPDATE the file header comment:
   - Remove references to board feet calculation
   - Update to describe dimension parsing/formatting utilities
   - Remove the board feet formula explanation

KEEP these functions (they are still used):
- `parseFractionalInches` - Used for parsing user input
- `formatDimension` - Used for displaying dimensions as fractions
- `COMMON_FRACTIONS` map - Used by formatDimension

The file should be renamed conceptually to "dimension utilities" but keep the filename for now to avoid breaking imports (filename change can happen in a future cleanup phase).

After removal, verify no imports break by running the build.
  </action>
  <verify>
1. Run `npm run check` - TypeScript compilation passes
2. Run `npm run build` - Build succeeds with no import errors
3. Verify file still exports parseFractionalInches and formatDimension
  </verify>
  <done>board-feet.ts no longer exports calculateBoardFeet or formatBoardFeet, still exports parseFractionalInches and formatDimension</done>
</task>

<task type="auto">
  <name>Task 2: Update component imports</name>
  <files>src/lib/components/bom/BOMItem.svelte, src/lib/components/bom/BOMCategory.svelte</files>
  <action>
Check and update any components that import calculateBoardFeet or formatBoardFeet:

1. Search for imports of calculateBoardFeet and formatBoardFeet in:
   - src/lib/components/bom/BOMItem.svelte
   - src/lib/components/bom/BOMCategory.svelte
   - Any other files found via grep

2. For each file that imports these functions:
   - REMOVE the import of calculateBoardFeet
   - REMOVE the import of formatBoardFeet
   - REMOVE any code that calls these functions
   - If the file still needs parseFractionalInches or formatDimension, keep those imports

Note: The actual removal of board feet DISPLAY from components happens in Phase 24 (UI-02). This task only ensures the imports don't break the build.

If components currently display board feet calculations, leave the display code but remove the function calls (replace with placeholder or empty string for now - Phase 24 will remove the display entirely).
  </action>
  <verify>
1. Run `npm run check` - no import errors
2. Run `npm run build` - build succeeds
3. Run `npm run dev` and load a BOM page - no runtime errors
  </verify>
  <done>No files import calculateBoardFeet or formatBoardFeet, build passes</done>
</task>

</tasks>

<verification>
1. `npm run check` passes
2. `npm run build` succeeds
3. Grep for calculateBoardFeet/formatBoardFeet returns only:
   - This PLAN.md file
   - RESEARCH.md (documentation)
   - ROADMAP.md (documentation)
   - Historical files in .planning/
4. `npm run dev` starts without errors
</verification>

<success_criteria>
1. board-feet.ts does NOT export calculateBoardFeet
2. board-feet.ts does NOT export formatBoardFeet
3. board-feet.ts DOES export parseFractionalInches
4. board-feet.ts DOES export formatDimension
5. Build passes with no import errors
6. Dev server starts without runtime errors
</success_criteria>

<output>
After completion, create `.planning/phases/23-schema-foundation/23-02-SUMMARY.md`
</output>
