---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - svelte.config.js
  - vite.config.ts
  - drizzle.config.ts
  - src/lib/server/db.ts
  - src/lib/server/schema.ts
  - .env
  - .env.example
  - tsconfig.json
  - tailwind.config.js
  - postcss.config.js
autonomous: true
must_haves:
  truths:
    - "npm run dev starts without errors"
    - "npm run build completes without errors"
    - "Database connection succeeds (testable via db query)"
  artifacts:
    - path: "src/lib/server/db.ts"
      provides: "Drizzle + Turso database client"
      exports: ["db"]
    - path: "src/lib/server/schema.ts"
      provides: "Database schema with Project model"
      contains: "projects"
    - path: "drizzle.config.ts"
      provides: "Drizzle configuration for migrations"
  key_links:
    - from: "db.ts"
      to: "schema.ts"
      via: "import * as schema"
      pattern: "import.*schema"
    - from: "db.ts"
      to: "Turso"
      via: "@libsql/client"
      pattern: "createClient"
---

<objective>
Scaffold SvelteKit project with database infrastructure.

Purpose: Establish project foundation with SvelteKit, TypeScript, Tailwind CSS, and Drizzle ORM connected to Turso.
Output: Working SvelteKit project that builds and runs, with database connection ready.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Tech stack decisions from PROJECT.md:
- SvelteKit for full-stack framework
- Drizzle ORM for database access
- Turso (libSQL) for serverless SQLite
- Tailwind CSS for styling
- TypeScript throughout
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold SvelteKit project</name>
  <files>package.json, svelte.config.js, vite.config.ts, tsconfig.json, tailwind.config.js, postcss.config.js, src/app.css</files>
  <action>
    Create SvelteKit project with:
    1. Run `npm create svelte@latest . -- --template=skeleton --types=typescript --no-add-ons --no-install` in project root
    2. Install core dependencies: `npm install`
    3. Install Tailwind CSS: `npm install -D tailwindcss postcss autoprefixer`
    4. Initialize Tailwind: `npx tailwindcss init -p`
    5. Configure tailwind.config.js content paths for SvelteKit: `["./src/**/*.{html,js,svelte,ts}"]`
    6. Add Tailwind directives to src/app.css: @tailwind base; @tailwind components; @tailwind utilities;
    7. Verify svelte.config.js uses adapter-auto (default)

    Note: Using adapter-auto for flexibility - can swap to adapter-vercel later for deployment.
  </action>
  <verify>npm run dev starts without errors, npm run build completes</verify>
  <done>SvelteKit project scaffolded with TypeScript and Tailwind CSS configured</done>
</task>

<task type="auto">
  <name>Task 2: Configure Drizzle ORM + Turso</name>
  <files>drizzle.config.ts, src/lib/server/db.ts, src/lib/server/schema.ts, .env, .env.example</files>
  <action>
    Install Drizzle dependencies:
    1. `npm install drizzle-orm @libsql/client`
    2. `npm install -D drizzle-kit`

    Create .env.example with:
    ```
    TURSO_DATABASE_URL=libsql://your-database.turso.io
    TURSO_AUTH_TOKEN=your-auth-token
    ```

    Create .env (will be gitignored):
    ```
    TURSO_DATABASE_URL=file:local.db
    TURSO_AUTH_TOKEN=
    ```

    Note: Using file:local.db for local development - no Turso account needed initially.
    User can connect real Turso DB later by updating .env.

    Create src/lib/server/db.ts:
    - Import createClient from @libsql/client
    - Import drizzle from drizzle-orm/libsql
    - Import schema
    - Create and export db client using env vars
    - Use TURSO_DATABASE_URL and TURSO_AUTH_TOKEN

    Create src/lib/server/schema.ts:
    - Import sqliteTable, text, integer from drizzle-orm/sqlite-core
    - Create projects table with: id (text, primary key), name (text), createdAt (integer timestamp), updatedAt (integer timestamp)
    - Export the table for use in queries

    Create drizzle.config.ts:
    - Configure for sqlite dialect
    - Point schema to ./src/lib/server/schema.ts
    - Set out to ./drizzle for migrations
    - Use file:local.db as dbCredentials url for local dev

    Add to .gitignore: .env, local.db, *.db

    Add npm script to package.json:
    "db:push": "drizzle-kit push"
    "db:studio": "drizzle-kit studio"
  </action>
  <verify>npm run db:push creates local.db without errors</verify>
  <done>Drizzle ORM configured with Turso driver, schema defined, local dev database working</done>
</task>

<task type="auto">
  <name>Task 3: Verify database connection</name>
  <files>src/routes/+page.server.ts</files>
  <action>
    Create a simple server load function to verify DB works:

    src/routes/+page.server.ts:
    - Import db from $lib/server/db
    - Import projects from $lib/server/schema
    - Create load function that queries projects table (select all, even if empty)
    - Return empty array on success (proves connection works)
    - Log connection success to console

    This file will be modified in Plan 02 to pass data to the dashboard page.
    For now, it just verifies database connectivity.

    Run `npm run dev` and check that no database errors appear.
  </action>
  <verify>npm run dev shows no database connection errors, console shows successful query</verify>
  <done>Database connection verified working with test query</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run dev` starts without errors
- [ ] `npm run build` completes without errors
- [ ] `npm run db:push` creates/updates local database
- [ ] No TypeScript errors
- [ ] Database query executes (visible in server console)
</verification>

<success_criteria>
- All tasks completed
- SvelteKit project scaffolded with TypeScript
- Tailwind CSS configured and working
- Drizzle ORM connected to local SQLite (Turso-compatible)
- Initial schema with projects table created
- Database connection verified
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
