---
phase: 07-tech-debt-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/routes/bom/+page.svelte (DELETE)
  - src/routes/api/chat/+server.ts (DELETE)
  - src/lib/components/ChatMessage.svelte (DELETE)
  - src/lib/components/ChatInput.svelte (DELETE)
  - package.json
autonomous: true

must_haves:
  truths:
    - "Orphaned /bom chat page no longer exists"
    - "Orphaned /api/chat endpoint no longer exists"
    - "Orphaned ChatMessage and ChatInput components no longer exist"
    - "@ai-sdk/svelte dependency removed from package.json"
    - "Application builds without errors"
    - "Application runs without errors"
  artifacts:
    - path: "src/routes/bom/+page.svelte"
      provides: "DELETED - must not exist"
      must_not_exist: true
    - path: "src/routes/api/chat/+server.ts"
      provides: "DELETED - must not exist"
      must_not_exist: true
    - path: "src/lib/components/ChatMessage.svelte"
      provides: "DELETED - must not exist"
      must_not_exist: true
    - path: "src/lib/components/ChatInput.svelte"
      provides: "DELETED - must not exist"
      must_not_exist: true
    - path: "package.json"
      provides: "Updated dependencies without @ai-sdk/svelte"
      contains_not: "@ai-sdk/svelte"
  key_links:
    - from: "src/routes/bom/new/+page.svelte"
      to: "/bom/new"
      via: "dashboard navigation"
      pattern: "href.*bom/new"
---

<objective>
Remove orphaned chat interface files from the Phase 2->3 architecture pivot.

Purpose: During Phase 3 implementation, the BOM generation approach shifted from a free-form chat interface to a structured 4-step wizard. The original chat implementation was never removed, leaving dead code in the codebase.

Output: Clean codebase with orphaned files removed and unused dependency purged.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-tech-debt-cleanup/07-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete orphaned chat interface files</name>
  <files>
    src/routes/bom/+page.svelte
    src/routes/api/chat/+server.ts
    src/lib/components/ChatMessage.svelte
    src/lib/components/ChatInput.svelte
  </files>
  <action>
    Delete the four orphaned files from the Phase 2->3 architecture pivot:

    1. Delete `src/routes/bom/+page.svelte` (orphaned chat UI page)
       - This is the old chat-based BOM interface
       - Replaced by wizard at `/bom/new`
       - 300 lines, ~7KB

    2. Delete `src/routes/api/chat/+server.ts` (orphaned chat endpoint)
       - Old streaming chat endpoint
       - Replaced by `/api/bom/generate` structured endpoint
       - 17 lines, ~570B

    3. Delete `src/lib/components/ChatMessage.svelte` (orphaned component)
       - Chat message bubble component
       - Only imported by orphaned /bom page
       - 97 lines, ~2.5KB

    4. Delete `src/lib/components/ChatInput.svelte` (orphaned component)
       - Chat input textarea component
       - Only imported by orphaned /bom page
       - 217 lines, ~4.3KB

    Use `rm` or equivalent to delete files. Git will track the deletions.

    IMPORTANT: Do NOT delete `/bom/new/` directory - that is the active wizard.
  </action>
  <verify>
    Run: `ls src/routes/bom/+page.svelte src/routes/api/chat/+server.ts src/lib/components/ChatMessage.svelte src/lib/components/ChatInput.svelte 2>&1`
    Expected: All four files should report "No such file or directory"

    Run: `ls src/routes/bom/new/+page.svelte`
    Expected: File exists (active wizard preserved)
  </verify>
  <done>
    All four orphaned files deleted. Active /bom/new wizard remains intact.
  </done>
</task>

<task type="auto">
  <name>Task 2: Remove @ai-sdk/svelte dependency and verify build</name>
  <files>
    package.json
    package-lock.json
  </files>
  <action>
    Remove the unused @ai-sdk/svelte dependency:

    1. Run `npm uninstall @ai-sdk/svelte`
       - This removes from package.json and package-lock.json
       - The package was only used by the orphaned /bom chat page
       - The active wizard uses `ai` package's generateObject() instead

    2. Verify no broken imports by running type check:
       Run `npm run check`
       Expected: 0 errors, 0 warnings

    3. Verify build succeeds:
       Run `npm run build`
       Expected: Build completes without errors

    4. Quick smoke test - start dev server briefly:
       Run `npm run dev` and verify it starts
       Then Ctrl+C to stop

    DO NOT remove these packages (they are actively used):
    - `ai` - Used by /api/bom/generate endpoint
    - `@ai-sdk/anthropic` - Used by AI provider factory
    - `@ai-sdk/openai` - Used by AI provider factory
  </action>
  <verify>
    Run: `grep "@ai-sdk/svelte" package.json`
    Expected: No output (dependency removed)

    Run: `npm run check`
    Expected: Exit code 0, no errors

    Run: `npm run build`
    Expected: Build succeeds without errors
  </verify>
  <done>
    @ai-sdk/svelte removed from dependencies. Type check passes. Build succeeds.
    Application is clean of orphaned code.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. **Files deleted:** All four orphaned files no longer exist
   ```bash
   ls src/routes/bom/+page.svelte 2>&1 | grep -q "No such file"
   ls src/routes/api/chat/+server.ts 2>&1 | grep -q "No such file"
   ls src/lib/components/ChatMessage.svelte 2>&1 | grep -q "No such file"
   ls src/lib/components/ChatInput.svelte 2>&1 | grep -q "No such file"
   ```

2. **Dependency removed:**
   ```bash
   ! grep -q "@ai-sdk/svelte" package.json
   ```

3. **Build succeeds:**
   ```bash
   npm run build
   # Exit code 0
   ```

4. **Active features preserved:**
   ```bash
   ls src/routes/bom/new/+page.svelte
   # File exists
   ```
</verification>

<success_criteria>
- [ ] src/routes/bom/+page.svelte deleted
- [ ] src/routes/api/chat/+server.ts deleted
- [ ] src/lib/components/ChatMessage.svelte deleted
- [ ] src/lib/components/ChatInput.svelte deleted
- [ ] @ai-sdk/svelte removed from package.json
- [ ] npm run check passes (0 errors)
- [ ] npm run build succeeds
- [ ] Dashboard -> /bom/new wizard still accessible
</success_criteria>

<output>
After completion, create `.planning/phases/07-tech-debt-cleanup/07-01-SUMMARY.md`
</output>
