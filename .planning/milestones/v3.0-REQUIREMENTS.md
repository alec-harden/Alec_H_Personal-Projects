# Requirements Archive: v3.0 Multi-User & Cut Optimizer

**Archived:** 2026-01-30
**Status:** SHIPPED

This is the archived requirements specification for v3.0.
For current requirements, see `.planning/PROJECT.md` (Validated section).

---

# Requirements: WoodShop Toolbox v3.0

**Defined:** 2026-01-29
**Core Value:** Enable real multi-user operation with proper security, enhance BOM with lumber dimensions, and add a new Cut List Optimizer tool for material efficiency.

## v3.0 Requirements

Requirements for v3.0 Multi-User & Cut Optimizer milestone. Grouped by feature area.

### RBAC & Security

- [x] **RBAC-01**: Users have a role field (admin or user)
- [x] **RBAC-02**: Admin role grants elevated permissions
- [x] **RBAC-03**: User role is default for new registrations
- [x] **RBAC-04**: Admin routes (/admin/*) check role before access
- [x] **RBAC-05**: Users can only see their own projects, BOMs, and cut lists
- [x] **RBAC-06**: First registered user becomes admin (or seed admin)

### User Management (Admin)

- [x] **USER-01**: Admin can view list of all users
- [x] **USER-02**: Admin can create new user account
- [x] **USER-03**: Admin can reset a user's password
- [x] **USER-04**: Admin can disable a user account
- [x] **USER-05**: Admin can view user details (email, created date, role)
- [x] **USER-06**: Disabled users cannot log in

### Email Flows

- [x] **EMAIL-01**: User can request password reset from login page
- [x] **EMAIL-02**: User receives email with password reset link
- [x] **EMAIL-03**: User can set new password via reset link (expires in 1 hour)
- [x] **EMAIL-04**: New user receives email verification request after signup
- [x] **EMAIL-05**: User can verify email by clicking link in email
- [x] **EMAIL-06**: User profile shows email verification status

### BOM Refinements

- [x] **BOM-05**: Visibility toggle uses eye icon (not checkbox)
- [x] **BOM-06**: Lumber items have dimension fields (length, width, height)
- [x] **BOM-07**: Lumber items display board feet (calculated from dimensions)
- [x] **BOM-08**: Lumber category shows total board feet
- [x] **BOM-09**: CSV export includes dimension columns for lumber
- [x] **BOM-10**: CSV import parses dimension columns for lumber

### Cut List Optimizer - Core

- [x] **CUT-01**: New tool accessible from dashboard (/cutlist)
- [x] **CUT-02**: User can select Linear or Sheet optimization mode
- [x] **CUT-03**: User can input required cuts with dimensions
- [x] **CUT-04**: User can input available stock dimensions
- [x] **CUT-05**: User can configure kerf/blade width
- [x] **CUT-06**: User can run optimization algorithm
- [x] **CUT-07**: Results display waste percentage
- [x] **CUT-08**: Results display which cuts come from which stock
- [x] **CUT-09**: User can clear all inputs and start over
- [x] **CUT-10**: User can save cut list to a project

### Cut List Optimizer - Linear (1D)

- [x] **CUT-11**: Linear mode accepts cut lengths
- [x] **CUT-12**: Linear mode accepts stock lengths
- [x] **CUT-13**: Linear mode supports multiple stock length options
- [x] **CUT-14**: Linear mode displays total linear feet summary
- [x] **CUT-15**: Linear mode visualizes unused portions of stock
- [x] **CUT-16**: 1D bin packing algorithm (FFD) produces optimal-ish cuts

### Cut List Optimizer - Sheet (2D)

- [x] **CUT-17**: Sheet mode accepts cut dimensions (L x W)
- [x] **CUT-18**: Sheet mode accepts sheet dimensions
- [x] **CUT-19**: Sheet mode supports grain direction toggle per cut
- [x] **CUT-20**: Sheet mode displays cut diagram visualization
- [x] **CUT-21**: Sheet mode displays number of sheets needed
- [x] **CUT-22**: 2D nesting algorithm (guillotine) produces optimal-ish placement

### Cut List Optimizer - BOM Integration

- [x] **CUT-23**: User can select a project
- [x] **CUT-24**: User can multi-select BOMs within selected project
- [x] **CUT-25**: Selected BOMs auto-filter to lumber items only
- [x] **CUT-26**: Lumber items pre-populate as cuts with dimensions

### Cut List Optimizer - Shop Checklist

- [x] **CUT-27**: User can view cut list as shop checklist
- [x] **CUT-28**: User can mark individual cuts as complete
- [x] **CUT-29**: Checklist shows completion progress indicator
- [x] **CUT-30**: Checklist completion state persists to project

### Cut List Optimizer - Differentiators

- [x] **CUT-31**: User can drag-drop materials to assign stock to cuts
- [x] **CUT-32**: User can manually override algorithm cut placement

### UI Refinements & Cut List Fixes

- [x] **UI-01**: Account creation requires First and Last names (default to 'Wood' and 'Worker' if blank)
- [x] **UI-02**: Logged-in dropdown displays user's First Name
- [x] **UI-03**: User dropdown fixed to top-right corner (fixed position, no scroll)
- [x] **NAV-01**: Left Side Panel reorganized: Dashboard, Projects, BOMs, Cut Lists
- [x] **NAV-02**: 'TOOLS' heading added below navigation with 'Create BOM' and 'Create Cut List'
- [x] **NAV-03**: All Wood Movement Calculator references removed
- [x] **NAV-04**: Dashboard shows only last 6 projects (sorted by most recent)
- [x] **NAV-05**: 'Start new build' icon and '+ New project' button remain active
- [x] **CUT-33**: Blade Kerf section moved above 'Available Stock' and 'Required Cuts'
- [x] **CUT-34**: Layout change: 'Available Stock' on left, 'Required Cuts' on right
- [x] **CUT-35**: BOM import loads materials into 'Available Stock' (not 'Required Cuts')
- [x] **CUT-36**: Mandatory 2.5-second loading screen after 'Optimize Cuts' click
- [x] **CUT-37**: New results page with 'Go Back' and 'Save to Project' buttons
- [x] **CUT-38**: New route/view for saved Cut Lists
- [x] **CUT-39**: Fix bug where saved Cut Lists are not viewable

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| RBAC-01 | 13 | Complete |
| RBAC-02 | 13 | Complete |
| RBAC-03 | 13 | Complete |
| RBAC-04 | 13 | Complete |
| RBAC-05 | 13 | Complete |
| RBAC-06 | 13 | Complete |
| USER-01 | 14 | Complete |
| USER-02 | 14 | Complete |
| USER-03 | 14 | Complete |
| USER-04 | 14 | Complete |
| USER-05 | 14 | Complete |
| USER-06 | 14 | Complete |
| EMAIL-01 | 15 | Complete |
| EMAIL-02 | 15 | Complete |
| EMAIL-03 | 15 | Complete |
| EMAIL-04 | 16 | Complete |
| EMAIL-05 | 16 | Complete |
| EMAIL-06 | 16 | Complete |
| BOM-05 | 17 | Complete |
| BOM-06 | 17 | Complete |
| BOM-07 | 17 | Complete |
| BOM-08 | 17 | Complete |
| BOM-09 | 17 | Complete |
| BOM-10 | 17 | Complete |
| CUT-01 | 18 | Complete |
| CUT-02 | 18 | Complete |
| CUT-03 | 18 | Complete |
| CUT-04 | 18 | Complete |
| CUT-05 | 18 | Complete |
| CUT-06 | 18 | Complete |
| CUT-07 | 18 | Complete |
| CUT-08 | 18 | Complete |
| CUT-09 | 18 | Complete |
| CUT-10 | 18 | Complete |
| CUT-11 | 19 | Complete |
| CUT-12 | 19 | Complete |
| CUT-13 | 19 | Complete |
| CUT-14 | 19 | Complete |
| CUT-15 | 19 | Complete |
| CUT-16 | 19 | Complete |
| CUT-17 | 20 | Complete |
| CUT-18 | 20 | Complete |
| CUT-19 | 20 | Complete |
| CUT-20 | 20 | Complete |
| CUT-21 | 20 | Complete |
| CUT-22 | 20 | Complete |
| CUT-23 | 21 | Complete |
| CUT-24 | 21 | Complete |
| CUT-25 | 21 | Complete |
| CUT-26 | 21 | Complete |
| CUT-27 | 21 | Complete |
| CUT-28 | 21 | Complete |
| CUT-29 | 21 | Complete |
| CUT-30 | 21 | Complete |
| CUT-31 | 21 | Complete |
| CUT-32 | 21 | Complete |
| UI-01 | 22 | Complete |
| UI-02 | 22 | Complete |
| UI-03 | 22 | Complete |
| NAV-01 | 22 | Complete |
| NAV-02 | 22 | Complete |
| NAV-03 | 22 | Complete |
| NAV-04 | 22 | Complete |
| NAV-05 | 22 | Complete |
| CUT-33 | 22 | Complete |
| CUT-34 | 22 | Complete |
| CUT-35 | 22 | Complete |
| CUT-36 | 22 | Complete |
| CUT-37 | 22 | Complete |
| CUT-38 | 22 | Complete |
| CUT-39 | 22 | Complete |

---

## Milestone Summary

**Shipped:** 59 of 59 v3.0 requirements (100%)
**Adjusted:** None
**Dropped:** None

All requirements were implemented as specified. No scope changes during milestone execution.

---
*Archived: 2026-01-30 as part of v3.0 milestone completion*
